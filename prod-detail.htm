<!DOCTYPE html>
<html>
    <head>
        <style>
            /* .checkout-container {
    display: none;
}

.checkout-container.active {
    display: block;
} */
        </style>
    </head>
    <body>
        <h1>Product Details</h1>
        <section>
            <div>
        <img id="product-image" src="" alt="">
      <div class="product-info">
        <h3 id="product-id"></h3>
      <h3 id="product-name"></h3>
      <p id="product-description"></p>
      <p id="product-price"></p>
      <input type="number" id="quantity" value="1" min="1">
      <button class="add-to-cart">Add to Cart</button>
      
      </div>
            </div>
        </section>
<br/>
        <div class="checkout-container">
            <button class="checkout">Checkout</button>
            <div class="checkout-details"></div>
          </div>

        <script>
//             const urlParams = new URLSearchParams(window.location.search);
// const productName = urlParams.get('name');
// const productPrice = urlParams.get('price');
// const productDescription = urlParams.get('description');
// const productImage = urlParams.get('image');

// // Display product details
// document.getElementById('product-name').innerHTML = productName;
// document.getElementById('product-price').innerHTML = productPrice;
// document.getElementById('product-description').innerHTML = productDescription;
// document.getElementById('product-image').src = productImage;

  // Alternatively
  // Retrieve product details from local storage
const prodDetails = JSON.parse(localStorage.getItem('productDetails'));

// Display product details
document.getElementById('product-id').innerHTML = prodDetails.id;
document.getElementById('product-name').innerHTML = prodDetails.name;
document.getElementById('product-price').innerHTML = '$'+prodDetails.price;
document.getElementById('product-description').innerHTML = prodDetails.description;
document.getElementById('product-image').src = prodDetails.image;

 // Add to cart functionality
//  const addToCart = () => {
//       const cart = JSON.parse(localStorage.getItem('cart')) || [];
//       cart.push(prodDetails);
//       localStorage.setItem('cart', JSON.stringify(cart));
//       alert('Added to cart!');
//     };
const addToCart = () => {
      const quantity = parseInt(document.getElementById('quantity').value);
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      const existingProduct = cart.find((item) => item.id === prodDetails.id);

      if (existingProduct) {
        existingProduct.quantity += quantity;
      } else {
        cart.push({ ...prodDetails, quantity });
      }

      localStorage.setItem('cart', JSON.stringify(cart));
      alert('Added to cart!');
    };

    // Checkout functionality
    const checkout = () => {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      const total = cart.reduce((acc, item) => acc + item.price * item.quantity, 0);
      const checkoutHTML = `
        <h2>Checkout</h2>
        <ul>
          ${cart.map((item) => `<li>${item.name} x ${item.quantity} - $${(item.price * item.quantity).toFixed(2)}</li>`).join('')}
        </ul>
        <p>Total: $${total.toFixed(2)}</p>
      `;
      document.querySelector('.checkout-details').innerHTML = checkoutHTML;
    };

    // Event listeners
    document.querySelector('.add-to-cart').addEventListener('click', addToCart);
    document.querySelector('.checkout').addEventListener('click', checkout);


        </script>
    </body>
</html>